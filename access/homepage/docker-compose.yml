services:
  homepage:
    image: ghcr.io/gethomepage/homepage:latest
    container_name: homepage
    ports:
      - "3000:3000"
    volumes:
      - ./config:/app/config
      - /var/run/docker.sock:/var/run/docker.sock # optional widgets
    env_file:
      - .env
    environment:
      HOMEPAGE_AUTH_PROVIDER: oidc
      HOMEPAGE_AUTH_OIDC_CLIENT_ID: ${AUTH0_CLIENT_ID}
      HOMEPAGE_AUTH_OIDC_CLIENT_SECRET: ${AUTH0_CLIENT_SECRET}
      HOMEPAGE_AUTH_OIDC_ISSUER: https://${AUTH0_DOMAIN}/
      HOMEPAGE_AUTH_OIDC_SCOPE: openid profile email
      HOMEPAGE_AUTH_OIDC_USERNAME_CLAIM: email
      PLEX_TOKEN: ${PLEX_TOKEN}
    restart: unless-stopped
    networks:
      - homelab

networks:
  homelab:
    external: true
